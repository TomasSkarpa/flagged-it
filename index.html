<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
    <meta name="description" content="Learn about countries playing different game modes - guessing games, flag recognition, and shape identification.">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Flagged It">
    <title>Flagged It - Country Guessing Games</title>
    <link rel="icon" type="image/png" href="assets/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="assets/favicon/site.webmanifest" />
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #1a1a1a;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #loading {
            text-align: center;
            user-select: none;
            transform: translateY(-10vh);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #loading h1 {
            margin-bottom: 25px;
            font-size: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        #loading p {
            margin-top: 25px;
            font-size: 17.5px;
            color: #aaa;
        }
        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid #fff;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #fyne-canvas {
            width: 100vw;
            height: 100vh;
            display: block;
            position: fixed;
            top: 0;
            left: 0;
        }
        #error {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        #error h1 {
            color: #ff6b6b;
            margin-bottom: 20px;
        }
        #error p {
            max-width: 500px;
            margin: 10px auto;
            line-height: 1.6;
        }
        @media (max-width: 768px) {
            #loading h1 {
                font-size: 28px;
            }
            #loading p {
                font-size: 14px;
            }
            body {
                position: fixed;
                width: 100%;
                height: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="loading">
        <h1>üåç Flagged It</h1>
        <div class="spinner"></div>
        <p>Loading application...</p>
    </div>
    <div id="error"></div>
    <script src="wasm_exec.js" onerror="showError('Failed to load wasm_exec.js')"></script>
    <script>
        const userLang = (navigator.language || navigator.userLanguage).split('-')[0];
        document.documentElement.lang = userLang;

        const translations = {
            en: { loading: 'Shifting tectonic plates to form countries...', loadingApp: 'Loading application...', errorTitle: '‚ö†Ô∏è Error Loading Application', errorMessage: 'Failed to load the application. Please refresh the page and try again.' },
            es: { loading: 'Desplazando placas tect√≥nicas para formar pa√≠ses...', loadingApp: 'Cargando aplicaci√≥n...', errorTitle: '‚ö†Ô∏è Error al Cargar la Aplicaci√≥n', errorMessage: 'No se pudo cargar la aplicaci√≥n. Por favor, actualiza la p√°gina e int√©ntalo de nuevo.' },
            fr: { loading: 'D√©placement des plaques tectoniques pour former des pays...', loadingApp: 'Chargement de l\'application...', errorTitle: '‚ö†Ô∏è Erreur de Chargement de l\'Application', errorMessage: '√âchec du chargement de l\'application. Veuillez actualiser la page et r√©essayer.' },
            de: { loading: 'Verschieben tektonischer Platten zur Bildung von L√§ndern...', loadingApp: 'Anwendung wird geladen...', errorTitle: '‚ö†Ô∏è Fehler beim Laden der Anwendung', errorMessage: 'Die Anwendung konnte nicht geladen werden. Bitte aktualisieren Sie die Seite und versuchen Sie es erneut.' },
            nl: { loading: 'Tektonische platen verschuiven om landen te vormen...', loadingApp: 'Applicatie laden...', errorTitle: '‚ö†Ô∏è Fout bij Laden van Applicatie', errorMessage: 'Kan de applicatie niet laden. Ververs de pagina en probeer het opnieuw.' },
            nb: { loading: 'Forskyver tektoniske plater for √• danne land...', loadingApp: 'Laster applikasjon...', errorTitle: '‚ö†Ô∏è Feil ved Lasting av Applikasjon', errorMessage: 'Kunne ikke laste applikasjonen. Vennligst oppdater siden og pr√∏v igjen.' },
            da: { loading: 'Forskubber tektoniske plader for at danne lande...', loadingApp: 'Indl√¶ser applikation...', errorTitle: '‚ö†Ô∏è Fejl ved Indl√¶sning af Applikation', errorMessage: 'Kunne ikke indl√¶se applikationen. Opdater venligst siden og pr√∏v igen.' },
            sv: { loading: 'F√∂rskjuter tektoniska plattor f√∂r att bilda l√§nder...', loadingApp: 'Laddar applikation...', errorTitle: '‚ö†Ô∏è Fel vid Laddning av Applikation', errorMessage: 'Kunde inte ladda applikationen. Uppdatera sidan och f√∂rs√∂k igen.' },
            fi: { loading: 'Siirret√§√§n tektonisia laattoja muodostaakseen maita...', loadingApp: 'Ladataan sovellusta...', errorTitle: '‚ö†Ô∏è Virhe Sovelluksen Latauksessa', errorMessage: 'Sovellusta ei voitu ladata. P√§ivit√§ sivu ja yrit√§ uudelleen.' },
            pt: { loading: 'Deslocando placas tect√≥nicas para formar pa√≠ses...', loadingApp: 'Carregando aplica√ß√£o...', errorTitle: '‚ö†Ô∏è Erro ao Carregar a Aplica√ß√£o', errorMessage: 'Falha ao carregar a aplica√ß√£o. Por favor, atualize a p√°gina e tente novamente.' },
            tr: { loading: '√úlkeler olu≈üturmak i√ßin tektonik plakalar kaydƒ±rƒ±lƒ±yor...', loadingApp: 'Uygulama y√ºkleniyor...', errorTitle: '‚ö†Ô∏è Uygulama Y√ºkleme Hatasƒ±', errorMessage: 'Uygulama y√ºklenemedi. L√ºtfen sayfayƒ± yenileyin ve tekrar deneyin.' },
            ro: { loading: 'Deplasarea plƒÉcilor tectonice pentru a forma »õƒÉri...', loadingApp: 'Se √ÆncarcƒÉ aplica»õia...', errorTitle: '‚ö†Ô∏è Eroare la √éncƒÉrcarea Aplica»õiei', errorMessage: 'Nu s-a putut √ÆncƒÉrca aplica»õia. VƒÉ rugƒÉm sƒÉ actualiza»õi pagina »ôi sƒÉ √Æncerca»õi din nou.' },
            hu: { loading: 'Tektonikus lemezek eltol√°sa orsz√°gok kialak√≠t√°s√°hoz...', loadingApp: 'Alkalmaz√°s bet√∂lt√©se...', errorTitle: '‚ö†Ô∏è Hiba az Alkalmaz√°s Bet√∂lt√©sekor', errorMessage: 'Az alkalmaz√°s bet√∂lt√©se sikertelen. K√©rj√ºk, friss√≠tse az oldalt √©s pr√≥b√°lja √∫jra.' },
            hr: { loading: 'Pomicanje tektonskih ploƒça za formiranje zemalja...', loadingApp: 'Uƒçitavanje aplikacije...', errorTitle: '‚ö†Ô∏è Gre≈°ka pri Uƒçitavanju Aplikacije', errorMessage: 'Neuspjelo uƒçitavanje aplikacije. Osvje≈æite stranicu i poku≈°ajte ponovno.' },
            cs: { loading: 'Posouv√°me tektonick√© desky a formujeme st√°ty...', loadingApp: 'Naƒç√≠t√°n√≠ aplikace...', errorTitle: '‚ö†Ô∏è Chyba p≈ôi Naƒç√≠t√°n√≠ Aplikace', errorMessage: 'Nepoda≈ôilo se naƒç√≠st aplikaci. Obnovte pros√≠m str√°nku a zkuste to znovu.' },
            sk: { loading: 'Pos√∫vame tektonick√© dosky a formujeme ≈°t√°ty...', loadingApp: 'Naƒç√≠tanie aplik√°cie...', errorTitle: '‚ö†Ô∏è Chyba pri Naƒç√≠tan√≠ Aplik√°cie', errorMessage: 'Nepodarilo sa naƒç√≠ta≈• aplik√°ciu. Obnovte pros√≠m str√°nku a sk√∫ste to znova.' },
            pl: { loading: 'Przesuwamy p≈Çyty tektoniczne, aby uformowaƒá pa≈Ñstwa...', loadingApp: '≈Åadowanie aplikacji...', errorTitle: '‚ö†Ô∏è B≈ÇƒÖd ≈Åadowania Aplikacji', errorMessage: 'Nie uda≈Ço siƒô za≈Çadowaƒá aplikacji. Od≈õwie≈º stronƒô i spr√≥buj ponownie.' },
            it: { loading: 'Spostando le placche tettoniche per formare i paesi...', loadingApp: 'Caricamento applicazione...', errorTitle: '‚ö†Ô∏è Errore nel Caricamento dell\'Applicazione', errorMessage: 'Impossibile caricare l\'applicazione. Aggiorna la pagina e riprova.' },
            id: { loading: 'Menggeser lempeng tektonik untuk membentuk negara...', loadingApp: 'Memuat aplikasi...', errorTitle: '‚ö†Ô∏è Kesalahan Memuat Aplikasi', errorMessage: 'Gagal memuat aplikasi. Silakan muat ulang halaman dan coba lagi.' },
            ms: { loading: 'Mengalihkan plat tektonik untuk membentuk negara...', loadingApp: 'Memuatkan aplikasi...', errorTitle: '‚ö†Ô∏è Ralat Memuatkan Aplikasi', errorMessage: 'Gagal memuatkan aplikasi. Sila muat semula halaman dan cuba lagi.' },
            fil: { loading: 'Inililipat ang mga tectonic plate upang mabuo ang mga bansa...', loadingApp: 'Naglo-load ng aplikasyon...', errorTitle: '‚ö†Ô∏è Error sa Pag-load ng Aplikasyon', errorMessage: 'Nabigo ang pag-load ng aplikasyon. Pakirefresh ang pahina at subukan muli.' },
            sw: { loading: 'Kusogeza mabao ya tektoniki ili kuunda nchi...', loadingApp: 'Inapakia programu...', errorTitle: '‚ö†Ô∏è Kosa la Kupakia Programu', errorMessage: 'Imeshindwa kupakia programu. Tafadhali onyesha upya ukurasa na ujaribu tena.' },
            vi: { loading: 'D·ªãch chuy·ªÉn c√°c m·∫£ng ki·∫øn t·∫°o ƒë·ªÉ t·∫°o th√†nh c√°c qu·ªëc gia...', loadingApp: 'ƒêang t·∫£i ·ª©ng d·ª•ng...', errorTitle: '‚ö†Ô∏è L·ªói T·∫£i ·ª®ng D·ª•ng', errorMessage: 'Kh√¥ng th·ªÉ t·∫£i ·ª©ng d·ª•ng. Vui l√≤ng l√†m m·ªõi trang v√† th·ª≠ l·∫°i.' }
        };

        const t = translations[userLang] || translations.en;
        const loadingP = document.querySelector('#loading p');
        if (loadingP) {
            loadingP.textContent = t.loading;
        }

        function showError(msg) {
            document.getElementById('loading').style.display = 'none';
            const errorDiv = document.getElementById('error');
            errorDiv.style.display = 'block';
            const t = translations[userLang] || translations.en;
            errorDiv.innerHTML = '<h1>' + t.errorTitle + '</h1><p>' + t.errorMessage + '</p><p style="font-size: 12px; color: #999;">' + msg + '</p>';
        }

        if (typeof Go === 'undefined') {
            showError('Go runtime not available');
        } else {
            const go = new Go();
            
            // Allow browser shortcuts (Cmd/Ctrl + number) to work
            document.addEventListener('keydown', function(e) {
                if (e.metaKey || e.ctrlKey) {
                    // Don't let the canvas handle browser shortcuts
                    e.stopPropagation();
                }
            }, true);
            
            WebAssembly.instantiateStreaming(fetch("flagged-it.wasm"), go.importObject).then((result) => {
                document.getElementById('loading').style.display = 'none';
                go.run(result.instance);
            }).catch((err) => {
                showError(err);
            });
        }
    </script>
</body>
</html>
